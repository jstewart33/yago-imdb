#!/usr/bin/perl

use strict;
use warnings;
use English;
use diagnostics;

foreach my $fp (glob("yago*.txt")) 
{
    my $prop = 0;

    printf "%s\n", $fp;
    $prop = 1 if ($fp =~ /prop/);

    open my $fh, "<", $fp or die "can't read open '$fp': $OS_ERROR";
    my $input;
    while ($input = <$fh>) 
    {
	$input =~ /^(\t)?(.*)$/;
	$input = $2;
	my @line = split(/\t/, $input);
	my $propfile;

	$propfile = uc($line[1]) . ".txt" if $prop;
	$propfile = uc($line[0]) . ".txt" if !$prop;

	open my $fh1, ">>", $propfile 
	    or die "can't read open '$propfile': $OS_ERROR";

	print $fh1 $line[0] . "\t" . $line[2] . "\n" if $prop;
	print $fh1 $line[1] . "\t" . $line[2] . "\n" if !$prop;

	close $fh1;
    }

  close $fh or die "can't read close '$fp': $OS_ERROR";
}
